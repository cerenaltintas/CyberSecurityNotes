- TCP/IP modeli, ağ iletişimi için temel bir çerçeve sağlayan ve internetin temelini oluşturan bir modeldir.
- "Transmission Control Protocol/Internet Protocol" kelimelerinin kısaltmasıdır ve OSI modeline benzer şekilde, ağ üzerindeki veri iletim sürecini katmanlar halinde düzenler.
- OSI modelinden önce geliştirilmiştir. Daha basitleştirilmiş bir yapıya sahiptir ve dört katmandan oluşur. Bu katmanlar, uygulama, taşıma, internet ve ağ erişim katmanlarıdır.
- Her katman, ağ iletişiminin farklı bir yönünü ele alır ve bir üst katmana hizmetler sağlar.
- TCP/IP, adını iki ana protokolden alır: TCP (Transmission Control Protocol) ve IP (Internet Protocol), sırasıyla Taşıma ve İnternet katmanlarının temel protokolleridir.

- TCP/IP Protokolünde veri akışı:
- ![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/tcp-data-flow-76501ca5b.webp)

### Uygulama katmanı

- Uygulama katmanı, TCP/IP modelinde en üstteki katmandır.
- Son kullanıcının ağ üzerindeki uygulamalarla etkileşime geçebilmesi için gerekli olan arayüzleri ve protokolleri sağlar. Web tarayıcıları, e-posta istemcileri ve çevrimiçi oyunlar gibi uygulamalar, Uygulama Katmanı'ndaki protokoller sayesinde çalışır.

Uygulama katmanında kullanılan bazı protokoller:

- **HTTP/HTTPS:** Hyper Text Transfer Protokol(HTTP) ve Secure Hyper Text Transfer Protokol (HTTPS) internetin temelini oluşturur. İnternet tarayıcıları ve sunucular arasındaki iletişimi yönetmek için kullanılır. HTTPS, HTTP-Secure anlamına gelir. HTTP ile kriptolama protokolü olan SSL (Secure Socket Layerı) birleşimidir. Oturum açma,kimlik doğrulama gibi işlemlerin gerektiği durumlarda iletişimi şifreleyerek iletişimin güvenliğini sağlar.
- **SNMP:**  Simple Network Management Protocol(SNMP),  TCP/IP protokol paketini kullanarak ağ cihazlarını(router,switch vb.) yönetmek için kullanılan bir çerçevedir.
- **SMTP:** Simple Mail Transfer Protocol(SMTP), e-posta mesajları göndermek ve almak için kullanılan bir iletişim protokolüdür
- **DNS:** İnternete bir bilgisayarı yada internet sitesini bağlantısını benzersiz bir şekilde tanımlamak için bir IP adresi kullanılır. Bu karmaşık IP adresi yerine adlandırılır. Domain Name System(DNS) de alan adlarını IP adreslerine çevirerek internet kaynaklarına erişebilmesini sağlar.
- **TELNET:** Telecommunication Network(TELNET) Yerel bilgisayar ile uzak bilgisayar arasında terminal bağlantısı kurulmasını sağlar.
- **SSH:** Secure Shell(SSH) ağ cihazlarına ve sunucularına erişmek için kullanılır. SSH TELNET protokolü temel farkı trafiği her iki yönde de şifreleyerek veri güvenliğini sağlar.
- **FTP:** File Transfer Protocol(FTP), dosyaları bir bilgisayardan başka bir bilgisayara aktarmak için kullanılır.

### Taşıma katmanı

- Uçtan uca iletişiminden sorumludur. Veri akışını kontrol eder ve veri paketlerinin sıralı bir şekilde iletildiği katmandır.
- İki ana protokol kullanılır:

**Transmission Control Protocol(TCP)**

Bir TCP paketi, header(başlık) ve data(veri) olmak üzere iki ana bölümden oluşur.

TCP Segment Formatı

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/tcpsegment-b8f04ce25.webp)

**Header(Başlık):** TCP paketi başlangıcında yer alır ve en az 20 bayttan oluşur. Başlık, veri iletimini kontrol etmek ve yönetmek için gerekli birçok kontrol bilgisini içerir.

- **Source(Kaynak) Port:** İletişimi başlatan istemci cihazın kullandığı port numarasıdır. Source port numarası, gönderen cihazın hangi uygulamasının veri gönderdiğini belirtir.
- **Destination(Hedef) Port:** : İletişimin hedefindeki bilgisayarın kullandığı port numarasıdır. Hedef port numarası, alıcı cihazdaki hedef uygulamanın tanımlayıcısıdır. Örneğin, web sunucuları - genellikle HTTP için 80, HTTPS için 443 port numaralarını kullanır.
- **Sequence Number(Sıra Numarası)**: Segmentin akışındaki sırasını belirler, verilerin doğru sırada yeniden birleştirilmesini sağlar.
- **Acknowledgment Number (Onaylama Numarası):** Alınan segmentin sıra numarasını onaylar.
- **Header Length(Başlık Uzunluğu):** Başlığın uzunluğunu belirtir ve genellikle 20-60 bayt arasındadır.
- **Flags(Bayraklar):** Bağlantının kurulması, yönetilmesi ve sonlandırılması için kullanılan kontrol sinyallerini içerir. Örneğin, SYN, ACK, FIN.
- **Window Size(Pencere Boyutu):** Alıcı tarafın alabileceği veri miktarını belirler, ağ tıkanıklığını önlemeye yardımcı olur.
- **Checksum(Hata Sınama Biti)**: Veri paketin hata kontrolünü sağlar.
- **Urgent Pointer(Acil İşaretçisi):** Acil verilerin varlığını ve sıralamasını belirtir.

**Data(Veri):** Başlıktan sonra gelen bölüm, uygulama katmanından gelen asıl verileri içerir. Bu bölümün boyutu, ağın MTU (Maximum Transmission Unit) değerine ve başlığın uzunluğuna bağlı olarak değişebilir.

Ağ üzerinde iki cihaz arasında güvenilir bir bağlantı kurulmasını sağlayan bir süreçtir. Bu işlem, veri iletiminin doğru ve güvenilir bir şekilde gerçekleşmesini garantiler.Hatalı veya eksik paketleri algılayıp yeniden ilettiği için güvenilir bir protokoldür.  
Gönderim sonunda TCP, mesajın tamamını segment olarak bilinen daha küçük birimlere böler ve her segment, çerçevelerin orijinal bir mesaj oluşturacak şekilde yeniden düzenlenmesi için gereken bir sıra numarası içerir. Alıcı tarafta TCP tüm veri paketlerini toplar ve sıra numaralarına göre yeniden sıralar.

TCP Three-Way Handshake

Three-Way Handshake, TCP/IP protokolü kullanılarak bir ağ üzerinde iki cihaz arasında güvenilir bir bağlantı kurulmasını sağlayan bir süreçtir. Bu işlem, veri iletiminin her iki uçta da doğru ve güvenilir bir şekilde gerçekleşmesini garantiler. Three-Way Handshake işlemi üç ana adımdan oluşur:

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/tcp-three-way-handshake-ef54efadc.webp)

- **1.Adım: SYN (Synchronize Sequence Numbers)**  
    İstemci, sunucuya bir SYN paketi göndererek bağlantı isteği gönderir. Bu paket, bağlantının kurulması için gerekli olan parametreleri içerir ve istemcinin başlangıç dizilim numarasını (sequence number) taşır. Bu numara, gönderilen her paketin sırasını belirlemek için kullanılır ve veri iletimindeki bütünlüğü sağlar.
- **2.Adım: SYN-ACK (Synchronize-Acknowledgment)**  
    Sunucu, istemcinin SYN paketini alır ve bağlantı kurma isteğini kabul ederse, bir SYN-ACK paketi geri gönderir. Bu paket, sunucunun kendi başlangıç dizilim numarasını ve istemcinin dizilim numarasının bir sonraki değerini onaylayan bir onaylama (acknowledgment) numarasını içerir.
- **3.Adım: ACK (Acknowledgment)**  
    İstemci, sunucunun SYN-ACK paketini alır ve bu paketi bir ACK (acknowledgment) paketi ile yanıtlar. Bu ACK paketi, sunucunun SYN-ACK paketinde belirtilen dizilim numarasının bir sonraki değerini onaylar.

User Datagram Protokolü (UDP)

- Uygulamaların veri aktarımında kullandığı protokollerden biridir.
- Paketlerini taşımak için önceden bir bağlantı kurulmasına gerek duyulmaz.
- Verinin karşı tarafa iletilip iletilmediği kontrol edilmez.
- Kaybolan verinin tekrar gönderilmesi, akış kontrolü yoktur.
- Genel olarak ses ve video gönderiminde kullanılır

UDP Segment Formatı

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/udpsegment-1b32f5f43.webp)

|Başlık|Açıklama|
|---|---|
|Source(Kaynak) Port|İletişimi başlatan istemci cihazın kullandığı port numarasıdır. Source port numarası, gönderen cihazın hangi uygulamasının veri gönderdiğini belirtir.|
|Destination(Hedef) Port|İletişimin hedefindeki bilgisayarın kullandığı port numarasıdır.|
|Length(Uzunluk)|Bayt cinsinden toplam bayt sayısını tanımlar.|
|Checksum(Hata Sınama Biti)|Opsiyona bağlı hata kontrolünü sağlar.|

### İnternet Katmanı

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/iplayer-e6604dcf4.webp)

- İnternet'in omurgasını oluşturur ve global veri iletiminin temelini sağlar.
- Bir üst katmandan gelen segmentleri alıcıya, uygun yoldan hatasız ulaştırılması sağlayan katmandır.
- Internet Protocol(IP) bu katmanın en önemli protokolüdür ve bu katman internet protokolü olarakda bilinir.

Internet Protocol (IP) Protokolü:

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/ipencap-fda5fc6c1.webp)

- Her cihaz, IP adresi aracılığıyla tanımlanır. Bu adresleme, internet üzerindeki her cihazın benzersiz bir şekilde tanımlanmasını ve ulaşılabilir olmasını sağlar.
- Linux işletim sistemine sahip bilgisayara "ifconfig" komut ile bilgisayara atanan IP adresi görülebilir

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/ifconfig-1b09f1b3f.webp)

- Veri paketleri, kaynak ve hedef IP adresleri kullanılarak, ağ üzerinde en uygun yol üzerinden yönlendirilir. Bu işlem, çeşitli yönlendirme protokolleri (RIP, OSPF, BGP) tarafından gerçekleştirilir.
- Taşıma katmanından gelen pakete IP başlığı ekleyerek adresleme yapar.
- **IP Adresleme:** Bu protokol, IP adresleri olarak bilinen mantıksal ana bilgisayar adreslerini uygular. IP adresleri internet ve daha üst katmanlar tarafından cihazı tanımlamak ve ağlar arası yönlendirme sağlamak için kullanılır.
- **Host-to-host iletişimi:** Verilerin iletileceği yolu belirler.
- **Veri Kapsülleme ve Biçimlendirme:** Bir IP protokolü, taşıma katmanı protokolünden gelen verileri kabul eder. Bir IP protokolü, verilerin güvenli bir şekilde gönderilip alınmasını sağlar ve verileri, IP datagramı olarak bilinen mesaja kapsüller.
- **Parçalanma ve Yeniden Birleştirme:** Veri bağlantısı katmanı protokolü tarafından IP datagramının boyutuna uygulanan sınır, Maksimum İletim birimi (MTU) olarak bilinir. IP datagramının boyutu MTU biriminden büyükse, IP protokolü datagramı yerel ağ üzerinde seyahat edebilmeleri için daha küçük birimlere böler. Parçalama gönderici veya ara yönlendirici tarafından yapılabilir. Alıcı tarafında tüm parçalar orijinal bir mesaj oluşturacak şekilde yeniden birleştirilir.
- **Yönlendirme:** IP datagramının LAN, MAN, WAN gibi aynı yerel ağ üzerinden gönderilmesine doğrudan dağıtım denir. Kaynak ve hedef uzak ağda olduğunda IP datagramı dolaylı olarak gönderilir. Bu, IP datagramının yönlendiriciler gibi çeşitli cihazlar aracılığıyla yönlendirilmesiyle gerçekleştirilebilir.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/iprouting-fabbe7be8.webp)

- Yukarıdaki görselde IP adresi ile router cihazları paket yönlendirmesi ile hedefe ulaşması gösterilmektedir.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/iplayerdatagram-3c2b41a1b.webp)

- Yukarıdaki görselde, bir üst katmandan(taşıma katmanı) gelen bir TCP segmentine IP Başlığı eklendiğindeki hali verilmiştir.

IP Datagram Formatı:

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/ipsegment-511c069cc.webp)

|Alan|Açıklama|
|---|---|
|Version|IP sürümünü tanımlar.IPv4, IPv6 vs.|
|Internet Header Length (IHL)|Datagram başlığının gerçek uzunluğunu gösterir|
|Type Of Service (TOS)|Paketlerin ağda nasıl önceliklendirileceğini ve işleneceğini belirtir. Düşük gecikme, yüksek bant genişliği, yüksek güvenilirlik veya düşük maliyet gibi seçenekler içerir. Günümüzde DSCP ve ECN alanları için kullanılır.|
|Total Length (TL)|Datagramının bayt cinsinden toplam uzunluğunu belirtir.|
|Identification|Veri parçaların her biri için 16 bitlik değer içerir. Alıcı tarafından veriyi yeniden birleştirmek için kullanılır.|
|Flags|8 Byte'lik birimler halinde parçalarin (fragment) datagram içindeki konumunu gösterir. DF (Don't Fragment) yönlendiricilerden datagrami parçalara bölmemesini buyuran 1 bitlik bir istek alandir. Alicinin parçalar (fragment) birlestiremedigi durumlarda gereklidir. MF (More Fragment): Bir datagramin son parçasi disindaki tüm par-çalarinda MF = 1' dir.|
|Fragment Offset|Bir mesajın parçalanması meydana geldiğinde, bu alan, genel mesajda bu parçadaki verilerin gittiği ofseti veya konumu belirtir|
|Time To Live (TTL)|Datagramın ağda ne kadar süre dolaşmasına izin verildiğini belirtir. Her yönlendirici, TTL alanının değerini iletmeden önce azaltır (bir azaltır). TTL alanı sıfıra düşerse yok edilir|
|Protocol|Bir datagramın hangi üst katman protokolüne ait olduğunu belirtir(TCP,UDP,ICMP). Alıcı IP katmanı bu lana bakarak paketi bir üstünde bulunan protokolerden hangisine ileteceğini anlar|
|Header Checksum|Datagram başlığında bir bozulma olup olmadığını belirlemeye yara|
|Source Address|Gönderici internet adresi (IP)|
|Destination Address|Alıcı internet adresi (IP)|
|Options|Opsiyonel olarak farklı amaçlar için kullanılır; güvenlik, hata raporlarma vs.|
|Data|Bir üst katmandan(taşıma katması) gelen veridir|

Internet Control Message Protocol (ICMP) Protokolü

- Kontrol amaçlı bir protokoldur.
- ICMP mesajları IP protokolü üzerinden gönderilir.
- Alıcı cihazın aktif olmaması veya ağ tıkanıklığı gibi olağandışı koşullar nedeniyle verileri iletimiyorsa, göndericiye veri biriminin teslim edilemediğini bildirmek için ICMP protokolü kullanılır.
- Bir ICMP protokolü temel olarak iki terim kullanır:
    - **ICMP Testi:** ICMP Testi hedefin ulaşılabilir olup olmadığını test etmek için kullanılır.
    - **ICMP Yanıtı:** ICMP Yanıtı, hedef cihazın yanıt verip vermediğini kontrol etmek için kullanılır.
- ICMP protokolünün temel sorumluluğu sorunları düzeltmek değil rapor etmektir. Düzeltmenin sorumluluğu gönderene aittir.
- Bir IP adresini veya domain adresini test etmek için ping komutu kullanılır.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/ping-be9de99d9.webp)

İlk Satır: Ping komutunun hedefi ve gönderilen veri boyutunu gösterir. Sonraki Satırlar: Her bir Echo Reply için bilgi içerir: * Byte miktarı: Alınan yanıtın boyutu. * ICMP_seq: Paket sıra numarası. * TTL (Time To Live): Paketin ağ üzerinde yaşayabileceği maksimum süre/hop sayısı. * Time: Hedeften yanıtın alınma süresi (milisaniye cinsinden).

İstatistikler:  
* Gönderilen ve alınan paket sayısı, paket kaybı yüzdesi ve toplam süre. * Round Trip Time (RTT): Min, ortalama, maksimum ve standart sapma değerleri. Bu değerler, ağ gecikmesi hakkında bilgi verir.

Çıktının Önemi: * Paket Kaybı (%): Ağın güvenilirliği hakkında bilgi verir. Yüksek paket kaybı, ağ problemlerini gösterebilir. * Zaman (ms): Gecikme süresi veya törelansını ifade eder. Düşük süreler, daha iyi ağ performansını işaret eder. * TTL Değeri: Paketin ağda ne kadar süre dolaştığına dair fikir verir. Düşük TTL değerleri, paketin uzak bir hedefe ulaştığını gösterebilir.

Adress (ARP) Protokolü

- **ARP, Adres Çözümleme Protokolü** anlamına gelir .
- ARP, IP adresinden fiziksel adresi bulmak için kullanılan bir ağ katmanı protokolüdür.
- **İki terim esas olarak ARP Protokolü ile ilişkilidir:**
    - **ARP isteği:** Gönderici cihazın fiziksel adresini bilmek istediğinde ARP isteğini ağa yayınlar.
    - **ARP yanıtı:** Ağa bağlı her cihaz ARP isteğini kabul eder ve isteği işler, ancak yalnızca alıcı IP adresini tanır ve fiziksel adresini ARP yanıtı biçiminde geri gönderir. Alıcı, fiziksel adresi hem önbelleğe hem de datagram başlığına ekler.

Adres Çözümleme Protokolü (ARP)

- IP adresini MAC Adresi yardımı ile çözer
- Bir IP adresi için bir ana bilgisayarın donanım adresini bulur (ve RARP için tersi).

ARP Command: arp -a

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/e46b2dee-f6fa-44de-86f2-a1e0c105d4e2/arp-a-f29ff8b02.webp)

### Ağ Erişim Katmanı (Network Access Layer)

- OSI referans modelinde tanımlanan Fiziksel katman ile Veri Bağlantısı katmanlarını kapsar.
- Verilerin ağ üzerinden fiziksel olarak nasıl gönderilmesi gerektiğini tanımlar.
- Bu katman esas olarak aynı ağdaki iki cihaz arasında veri aktarımından sorumludur.
- Bu katman tarafından gerçekleştirilen işlevler, IP datagramının ağ tarafından iletilen çerçevelere kapsüllenmesi ve IP adreslerinin fiziksel adreslerle eşleştirilmesidir.
- Bu katmanın kullandığı protokoller ethernet, token ring, FDDI, X.25, çerçeve rölesidir.

Ağ Erişim Katmanı, veri paketlerinin fiziksel ve lojistik ağ yapıları üzerinden nasıl iletilip alınacağını tanımlar. Bu katman, cihazların birbiriyle iletişim kurabilmesi için gerekli donanım adresleme mekanizmalarını içerir.

Donanım Adresleme: Her ağ cihazı, genellikle bir MAC adresi ile tanımlanır. Bu adresleme, ağ üzerindeki cihazların birbirini tanıması ve veri iletimi için gerekli olan fiziksel adresleri sağlar.  
Veri Paketleme: Ağ Erişim Katmanı, verilerin ağ ortamında iletilmesi için paketlere bölünmesini ve çerçeveleme işlemini yönetir. Bu süreç, veri paketlerinin doğru biçimde kapsüllenmesini ve hedefe ulaştırılmasını sağlar.