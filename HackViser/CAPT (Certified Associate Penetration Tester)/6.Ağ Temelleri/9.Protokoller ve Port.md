### Protokoller

- ==Bilgisayarlar birbirleriyle ağ protokolleri ile iletişim kurar.==
- Protokoller, makinelerin nasıl veri alışverişi yapacağını düzenleyen kurallardır ve etkili iletişim sağlar.
- Bir işletim sisteminde (OS), bir protokol bir süreç veya hizmet olarak çalışabilir.

### Port

- Bağlantı noktaları, bir protokol işlemine veya hizmetine benzersiz bir bağlantı noktası numarası bağlayan mantıksal yapılardır.
- Bilgisayarlar, ağ uygulamalarının çoklu görevi nedeniyle bağlantı noktalarına ihtiyaç duyar.
- Bir bilgisayarın yalnızca bir IP adresi olabileceğinden, üzerinde çalışan ağ protokollerini ve hizmetlerini ayırt etmek için bağlantı noktalarına ihtiyaç duyar.
- TCP/IP'nin 65.536 bağlantı noktası vardır
- 0'dan 1023'e kadar olan port numaraları iyi bilinen portlar olarak tanımlanır. Bu portlar, IANA (Internet Assigned Numbers Authority) tarafından yönetilir ve tanımlanır.
  
	Bazı önemli rezerve edilen portlar:

| Servis, Protokol veya Uygulama                                          | Port Numarası | TCP/UDP |
| ----------------------------------------------------------------------- | ------------- | ------- |
| FTP (File Transfer Protocol)                                            | 20, 21        | TCP     |
| Secure FTP (SFTP)                                                       | 22            | TCP     |
| SSH (Secure Shell Protocol)                                             | 22            | TCP     |
| Telnet                                                                  | 23            | TCP     |
| SMTP (Simple Mail Transfer Protocol)                                    | 25            | TCP     |
| DNS (Domain Name System)                                                | 53            | UDP     |
| DHCP (Dynamic Host Configuration Protocol)                              | 67, 68        | UDP     |
| TFTP (Trivial File Transfer Protocol)                                   | 69            | UDP     |
| HTTP (Hypertext Transfer Protocol)                                      | 80            | TCP     |
| POP3 (Post Office Protocol version 3)                                   | 110           | TCP     |
| NTP (Network Time Protocol)                                             | 123           | UDP     |
| IMAP4 (Internet Message Access Protocol version 4)                      | 143           | TCP     |
| SNMP (Simple Network Management Protocol)                               | 161           | UDP     |
| LDAP (Lightweight Directory Access Protocol)                            | 389           | TCP     |
| HTTPS (Hypertext Transfer Protocol Secure)                              | 443           | TCP     |
| Server Message Block (SMB)                                              | 445           | TCP     |
| LDAPS (Lightweight Directory Access Protocol Secure)                    | 636           | TCP     |
| RDP (Remote Desktop Protocol)                                           | 3389          | TCP     |
| ITU Telecommunication Standardization Sector A/V Recommendation (H.323) | 1720          | TCP     |
| Session Initiation Protocol (SIP)                                       | 5060, 5061    | TCP     |

### Domain Name System (DNS)

- Bir alan adını karşılık gelen IP adresine çözümlemek için kullanılan protokoldür.
    - hackviser.com → 162.0.232.236

- Varsayılan olarak UDP 53 numaralı port kullanılır. Ancak, bölge transferleri veya daha büyük yanıtlar gibi özel durumlarda TCP 53 numaralı port kullanılır.
  
- **nslookup** aracı kullanarak DNS sorgusu yapılabilir.
  
    - Komut İstemcisine veya Terminal'e 
        
        nslookup [alan adı veya IP adresi]
         yazın.
         
    - Örneğin: 
        
        nslookup google.com

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/f60b4557-1fcf-4e99-add2-501e8f493064/nslookup-454e95e9e.webp)

### Simple Network Management Protocol (SNMP)

- Ağ cihazlarını izlemek ve yönetmek için kullanılan protokoldür
- Yöneticilerin ağ cihazlarını ve trafiğini izlemelerini ve yönetmelerini sağlar. Ağ cihazlarının durumları bellek, CPU, bant genişliği bilgiler iletmesine izin verir:
- Varsayılan olarak TCP bağlantı noktası 161'i kullanır
```
snmpwalk -v 2c -c public 192.168.1.50
```

### Lightweight Directory Access Protocol (LDAP)

- Dizin hizmeti sistemlerine erişmek ve bunları sorgulamak için bir araç sağlayan protokoldür
    - Kullanıcı adları, Parolalar, Bilgisayar Hesapları, vb.
- Tipik olarak Unix/Linux tabanlı veya Microsoft Active Directory tabanlı olarak çalışır.
- Varsayılan olarak TCP 389 kullanır
- **Komut Örneği (Sertifika doğrulaması ile sorgu):**
```
ldapsearch -x -h 192.168.1.50 -b "dc=sirket,dc=local"
```

### LDAP Secure (LDAPS)

- LDAP ağ trafiğini şifrelemek için SSL kullanan güvenli bir LDAP sürümüdür.
- Varsayılan olarak TCP bağlantı noktası 636'yı kullanır
- **Komut Örneği:** Şifreli kanaldan sertifika hatasını yoksayarak bağlan:
```
LDAPTLS_REQCERT=never ldapsearch -x -H ldaps://192.168.1.50:636
```

### Server Message Block (SMB)

- Microsoft ortamlarında yaygın olarak kullanılan ağ ve dosya paylaşım protokolüdür
- Sistemlerin dosyalarını ve yazıcılarını diğer sistemlerle paylaşmasını sağlar
- Varsayılan olarak TCP bağlantı noktası 445'i kullanır
- **Komut Örneği:** Hedefteki paylaşılan klasörleri listele:
```
smbclient -L //192.168.1.50 -U kullanıcı_adı
```

### Telnet

- Uzak bir ana bilgisayara "güvensiz" bir şekilde bağlanmak için kullanılan eski protokoldür
- Veriler açık metin olarak aktarılır, bu nedenle güvensiz olarak kabul edilir
- Günümüzde öncelikle yönlendiriciler gibi yönetilen ağ cihazlarına seri bağlantı üzerinden erişmek için kullanılır
- Varsayılan olarak TCP Bağlantı Noktası 23'ü kullanır
- **Komut Örneği:** Cihaza terminal üzerinden bağlan:
```
telnet 192.168.1.50 23
```

### Secure Shell (SSH)

- Uzak bir ana bilgisayara güvenli bir şekilde bağlanmak için kullanılan bir kriptografik protokoldür
- Bir *terminal konsolu kullanır*
- Verileri açık anahtar altyapısı (PKI) ile şifreleyerek güvenli hale getirir
- Varsayılan olarak TCP bağlantı noktası 22'yi kullanır
- **Komut Örneği:** Kullanıcı ile güvenli oturum aç:
```
ssh kullanıcı_adı@192.168.1.50 -p 22
```
### Remote Desktop Protocol (RDP)

- Kullanıcıların bir bilgisayara uzaktan bağlanmasına, görüntülemesine ve kontrol etmesine olanak tanıyan bir Microsoft protokolüdür
- Uzak bilgisayardan *Windows masaüstüne erişim sağlar*.
- Microsoft işletim sisteminde yerleşiktir.
- Varsayılan olarak TCP bağlantı noktası 3389'u kullanır
- **Komut Örneği:** (Linux üzerinden) Uzak masaüstüne bağlan:
```
xfreerdp /u:admin /p:sifre /v:192.168.1.50
```

### File Transfer Protocol (FTP)

- Bilgisayar arasında dosya aktarmak için kullanılan protokoldür
- Yapılandırmaya göre kullanıcı adı ve parola ile kimlik doğrulaması yapabilir veya **anonim** girişleri kullanabilir.
- Veriler açık metin olarak aktarılır, bu nedenle güvensiz kabul edilir
- Dosyaları ve klasörleri görüntüleme, listeleme, ekleme, silme işlemleri yapılabilir.
- Varsayılan olarak veri Transferleri için 20, kontrol için 21 portunu kullanır.
- **Komut Örneği:** Sunucuya bağlanıp dosya çek/yükle:
```
ftp 192.168.1.50
```

### Secure File Transfer Protocol (SFTP)

- SSH üzerinden şifreli bir şekilde dosya aktarımı sağlar
- Varsayılan olarak TCP bağlantı noktası 22'yi kullanır (SSH ile aynı bağlantı noktası)
- **Komut Örneği:** Güvenli dosya paneline bağlan:
```
sftp kullanıcı_adı@192.168.1.50
```

### Simple Mail Transfer Protocol (SMTP)

- E-postaları bir e-posta istemcisinden hedef e-posta sunucusuna iletmek için kullanılan e-posta protokolüdür.
- Varsayılan olarak TCP Bağlantı Noktası 25'i kullanır
- **Komut Örneği:** Sunucuya elle bağlanıp merhaba (test) de:
```
telnet 192.168.1.50 25
# Sonra: HELO alanadi.com
```
### Post Office Protocol Version 3 (POP3)

- Bir e-posta sunucusundan e-postaları almak için kullanılan e-posta protokolüdür
- Varsayılan olarak TCP Bağlantı Noktası 110'u kullanır
- Komut Örneği (E-posta sayısını kontrol etme):
```
telnet 192.168.1.50 110
Bağlandıktan sonra:
USER kullanici_adi
PASS sifre
STAT
```
### Internet Message Access Protocol (IMAP)

- POP3'ün yerini alan bir başka e-posta protokolüdür
- Kullanıcıların sunuculardaki e-postalara erişmesine ve e-postayı sunucuda okumasına ya da istemci makineye indirmesine olanak tanır
- Varsayılan olarak TCP bağlantı noktası 143'ü kullanır
- **Komut Örneği (Gelen kutusunu listeleme):**
```
curl -u "kullanici:sifre" imap://192.168.1.50/INBOX
```

### Hypertext Transfer Protocol (HTTP)

- World Wide Web (WWW) için tarama hizmetleri sağlayan protokoldür
- Bir internet sayfasının içeriğini bir web sunucusundan alır.
- İstekler hiper metin işaretleme dilinde (HTML) yapılır ve tarayıcınıza bu formatta döndürülür
- Veriler düz metin olarak gönderilir
- Varsayılan olarak TCP Bağlantı Noktası 80'i kullanır

### HTTP Secure (HTTPS)s

- HTTP içeriğini şifrelemek için SSL/TLS kullanan güvenli bir HTTP sürümüdür.
- Açık Anahtar Altyapısı (PKI) kullanır
- Varsayılan olarak TCP Bağlantı Noktası 443'ü kullanır
- **Komut Örneği (Sitenin SSL sertifika detaylarını görme):**
```
openssl s_client -connect www.google.com:443
```

**Sitenin sadece başlık (header) bilgilerini getir:**
```
curl -I https://www.google.com 
```

**Dosya indirmek için:** 
```
curl -O http://site.com/dosya.zip
```


Hangi portun açık olduğunu ve hangi servisin çalıştığını hızlıca test etmek istersen şu **nmap** komutunu notlarının en başına ekleyebilirsin:
```
Hedef sistemdeki en yaygın portları ve servis versiyonlarını tara:
nmap -sV 192.168.1.50
```