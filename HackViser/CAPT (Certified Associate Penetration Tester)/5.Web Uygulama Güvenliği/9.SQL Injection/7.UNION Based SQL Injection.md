UNION Based SQL Injection, SQL Injection türleri arasında özellikle veri sızdırmak için kullanılan etkili bir yöntemdir. Bu teknik, SQL sorgularının

UNION

operatörü kullanılarak birleştirilmesi esasına dayanır. UNION operatörü, iki veya daha fazla SQL sorgusunun sonuçlarını tek bir sorgu sonucu olarak birleştirmek için kullanılır.

UNION SQL Injection saldırıları, orijinal sorguya ek sorgular ekleyerek yürütülür. **Saldırının başarılı olabilmesi için orijinal sorgu ve eklenen sorgunun sonuçları aynı sayıda sütun içermeli ve bu sütunların veri tipleri uyumlu olmalıdır.**

Temel Adımlar

**1. Sütun Sayısını Belirleme:** İlk adım olarak hedef alınan uygulamada çalışan SQL sorgusunun kaç sütundan veri çektiği tespit edilmelidir. Sütun sayısının öğrenilmesi UNION ile birlikte yazacağımız SQL Injection payloadının doğru çalışması için gereklidir. Sütun sayısını tespit etmek için genellikle

ORDER BY

yöntemi veya UNION sorgusunun değiştirilerek deneme-yanılma yöntemine dayanan teknikler kullanılır.

**2. Veri Tipi Uyumluluğunu Sağlama:** Sütunların veri tiplerinin uyumlu olduğundan emin olunmalıdır, çünkü UNION kullanılırken tüm sorguların aynı yapıda olması gerekir.

**3. Bilgi Çıkarma:** Saldırgan, UNION komutunu kullanarak ek bilgileri elde edecek ek sorgular ekler.

### Uygulama

UNION Based SQL Injection tekniğini daha iyi anlamak için bir uygulama yapalım. Uygulama için

Union-Based SQL Injection

laboratuvarını kullanacağız.

### Pratik Becerilerinizi Test Edin!

Öğrendiklerinizi pekiştirmek için laboratuvar çözümlerimizi keşfedin.

Laboratuvara gittiğimizde bizi şöyle bir sayfa karşılıyor.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-6-11f3961cb.webp)

İlk olarak SQL Injection zafiyetinin varlığı test etmek için

' OR 1=1#

payloadını kullanalım.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-7-5cd364848.webp)

Kullandığımız bu payload ile birlikte SQL Injection zafiyetinin varlığını keşfettiğimizi aşağıdaki görselden de görebiliriz. Yazmış olduğumuz payload ile, arka planda çalışan SQL sorgusuna müdahale ettik ve yaklaşık 100 kadar araç kaydının bilgisini çektik.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-8-61a3455d2.webp)

Sütun Sayısını Belirleme

Şimdi aşağıdaki gibi bir UNION SQL Injection payloadı yazarak sütun sayısını tespit etmeye çalışalım.

**Örnek Payload:**

FORD' UNION SELECT 1,2 #

Bu payload ile birlikte, arka planda çalışan SQL sorgusunda 2 sütundan veri çekildiğini varsayarak deneme yapıyoruz. Eğer yaptığımız deneme başarılı olursa sonuç alacağız, deneme başarısız olursa sonuç almayacağız.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-10-f196135ca.webp)

Yukarıdaki görselde de görüldüğü üzere sonuç alamadık. Denemelerimizi sırasıyla 3 sütun, 4 sütun, 5 sütun için denemeye devam edeceğiz.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-11-de91cccee.webp)

Evet sütun sayısını bulmayı başardık! Yukarıdaki görselde de görüldüğü üzere, çıkan sonuç tablosunun en altında 1,2,3,4 verilerini içeren bir satır bulunuyor.

Veri Çıkarma

Şimdi çalışan payloadımızdaki UNION kısmını düzenleyerek veri tabanından istediğimiz veriyi çıkarabiliriz.

**Doğru Payload:**

FORD' UNION SELECT 1,2,3,4 #

Bilgi Toplama Fonksiyonları

MySQL'deki bazı bilgi toplama fonksiyonları aşağıdaki gibidir.

|Fonksiyon|Açıklama|
|---|---|
|USER()|Veri tabanı kullanıcı adı ve host adını geri döndürür|
|DATABASE()|Seçili veri tabanı bilgisini geri döndürür|
|VERSION()|SQL sunucusunun sürüm bilgisini geri döndürür|

Şimdi bu fonksiyonları SQL Injection payloadımıza ekleyelim ve çalıştıralım.

**Payload:**

FORD' UNION SELECT USER(),DATABASE(),VERSION(),4 #

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/9e1cba44-d28c-4d3d-89e8-9ba515399b32/image-12-1503c5e6c.webp)

UNION Based SQL Injection yöntemi kullanılarak temel olarak veri çıkarma işlemlerini gerçekleştirdik.