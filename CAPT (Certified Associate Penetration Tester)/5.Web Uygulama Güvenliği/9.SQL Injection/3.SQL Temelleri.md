SQL (Structured Query Language), veritabanı ile iletişim kurmak ve veritabanı üzerinde işlemler yapmak için kullanılan bir programlama dilidir. Bu bölümde, SQL dilinin temel yapısal özellikleri ve sorgu komutlarına dair detayları ele alacağız.

### SQL Yapısı

İlişkisel veri tabanlarında veriler, belirli bir veri tabanı içerisindeki tablolarda tutulur. Tablolar ise satır ve sütunlardan oluşur.

phpMyAdmin isminde, veri tabanı yönetimi için grafiksek arayüz sağlayan bir web uygulaması bulunmaktadır. Şimdi phpMyAdmin arayüzü üzerinden bir veri tabanının yapısına bir göz gezdirelim.

Aşağıda

world

isminde bir veri tabanı içindeki tablolar yer almaktadır.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/4d175e38-8662-46bc-bc6d-672869a782fb/image-2-16f72a3e7.webp)

Bu 3 tablodan

Country

tablosunun yapısına bakalım. Aşağıda yer alan

Code

,

Name

gibi alanlar, Country tablosunun sütunlarını oluşturmaktadır.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/4d175e38-8662-46bc-bc6d-672869a782fb/image-3-3c19086b8.webp)

Country

tablosundaki kayıtlar (veriler ya da satırlar da denmektedir) ise aşağıdaki gibidir.

![](https://storage.hackviser.com/file/hackviser-prod/trainings/sections/images/4d175e38-8662-46bc-bc6d-672869a782fb/image-4-0c8a9fc85.webp)

### Veri Tabanına Bağlanma

PostgreSQL, MySQL, SQL Server gibi bir çok veritabanı yazılımı arasından MySQL'i seçelim. Bunun için kendi bilgisayarımıza yüklediğimiz veya başka bir sunucuda çalışan MySQL'e bağlanalım.

```auto
root@debian:~# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 8.3.0 MySQL Community Server - GPL

Copyright (c) 2000, 2024, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

MySQL'e parola ile birlikte root kullanıcısı olarak bağlandık. Artık erişmiş olduğumuz MySQL konsolunda SQL komutları yürütebiliriz.

SQL sorguları

**;**

karakteri ile sonlandırılır. Yazılan SQL komutlarının sonuna**

;

**eklememiz gerekmektedir.

### Veri Tabanları Listeleme

Bir MySQL sunucusunda birden fazla veri tabanı bulunabilir. Veri tabanlarını listelemek için

SHOW DATABASES;

komutunu çalıştırırız.

```auto
mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0,00 sec)
```

MySQL veritabanı yönetim sistemi, yönetim ve işlevselliği artırmak amacıyla birkaç önemli sistem veritabanı içerir. Bunlar

information_schema

,

mysql

,

performance_schema

ve

sys

veritabanlarıdır.

information_schema

information_schema veritabanı, MySQL sunucusunun meta verilerini içerir. Bu veritabanı, diğer tüm veritabanları hakkında yapısal bilgileri tutar. Örneğin, tablolar, sütunlar, izinler ve depolama motorları hakkındaki detayları içerir. SQL sorguları kullanılarak bu veritabanına sorgu gönderilebilir, ancak doğrudan değiştirilemez.

mysql

mysql veritabanı, MySQL sunucusunun kullanıcı bilgilerini, ayrıcalıklarını ve diğer sistem düzeyi bilgilerini içerir. Kullanıcı hesapları, parolalar, erişim izinleri ve diğer yapılandırma bilgileri bu veritabanında saklanır. Sunucu güvenliği ve kullanıcı yönetimi açısından kritik bir öneme sahiptir.

performance_schema

performance_schema veritabanı, MySQL sunucusunun performans analizi için gerekli araçları ve tabloları içerir. Bu veritabanı, sunucu üzerinde çalışan işlemler ve sorgular gibi performans verilerini toplar. Geliştiriciler ve veritabanı yöneticileri, bu veritabanını kullanarak sunucunun performansını izleyebilir ve optimizasyonlar yapabilir.

sys

sys veritabanı, performance_schema veritabanından toplanan verileri daha anlaşılır ve kullanıcı dostu hale getirmeyi amaçlar. Performans teşhisleri ve izlemeleri için daha yüksek seviyeli görünümler ve işlevler sunar. Bu veritabanı, sunucunun sağlığı ve performansı hakkında daha kolay sorgulamalar ve raporlamalar sağlar.

### Veri Tabanı Oluşturma

Hayali bir

fogolo_app

adındaki uygulama için veri tabanı tasarladığımızı düşünelim. İlk olarak bir veritabanı oluşturmamız gerekir.

Yeni bir veri tabanı oluşturmak için

CREATE DATBASE <DATABASE_NAME>;

komutu kullanılır.

```auto
mysql> CREATE DATABASE fogolo_app;
Query OK, 1 row affected (0,00 sec)

mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| fogolo_app         |
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0,00 sec)
```

### Veri Tabanı Seçme

Üzerinde işlem yapacağımız veri tabanını seçmek SQL sorguları yazarken büyük kolaylık sağlar. Bir veri tabanını seçmek için

USE <DATABASE_NAME>;

kullanılır.

```auto
mysql> USE fogolo_app;
Database changed
```

### Tabloları Listeleme

Üzerinde işlem yapacağımız veri tabanını seçtikten sonra seçtiğimiz veri tabanı içindeki tabloları listelemek için

SHOW TABLES;

komutunu kullanırız.

```auto
mysql> SHOW TABLES;
Empty set (0,01 sec)

```

### Tablo Oluşturma

Yeni bir tablo oluşturmak için aşağıdaki syntax kullanılır.

```auto
CREATE TABLE table_name (
    column1 datatype,
    column2 datatype,
    column3 datatype,
   ....
);
```

Bir tablo oluştururken sütunları ve sütunlarının veri türlerini belirtmemiz gerekir.

Bir iş yerinde çalışanlarla ilgili bilgileri tutan

**Persons**

isminde bir tablo oluşturalım. Bu tablo

PersonID

,

LastName

,

FirstName

,

Address

ve

City

olmak üzere 5 sütundan oluşur.

```auto
mysql> CREATE TABLE Persons (
    ->     PersonID int,
    ->     LastName varchar(255),
    ->     FirstName varchar(255),
    ->     Address varchar(255),
    ->     City varchar(255)
    -> );
Query OK, 0 rows affected (0,01 sec)

mysql> SHOW TABLES;
+----------------------+
| Tables_in_fogolo_app |
+----------------------+
| Persons              |
+----------------------+
1 row in set (0,01 sec)
```

### Tabloya Kayıt Ekleme

Bir tabloya yeni bir kayıt eklerken kullanılan syntax

INSERT INTO table_name (column1, column2, column3, ...) VALUES (value1, value2, value3, ...);

şeklindedir.

Şimdi,

Persons

tablomuza 5 tane kayıt girelim.

```auto
mysql> INSERT INTO Persons (PersonID, LastName, FirstName, Address, City) VALUES (1, 'Smith', 'John', '123 Oak St', 'New York');
Query OK, 1 row affected (0,00 sec)

mysql> INSERT INTO Persons (PersonID, LastName, FirstName, Address, City) VALUES (2, 'Johnson', 'Emily', '456 Maple Ave', 'Los Angeles');
Query OK, 1 row affected (0,00 sec)

mysql> INSERT INTO Persons (PersonID, LastName, FirstName, Address, City) VALUES (3, 'Williams', 'Michael', '789 Pine Rd', 'Chicago');
Query OK, 1 row affected (0,00 sec)

mysql> INSERT INTO Persons (PersonID, LastName, FirstName, Address, City) VALUES (4, 'Brown', 'Sarah', '101 Elm St', 'Houston');
Query OK, 1 row affected (0,00 sec)

mysql> INSERT INTO Persons (PersonID, LastName, FirstName, Address, City) VALUES (5, 'Davis', 'James', '202 Birch Dr', 'Phoenix');
Query OK, 1 row affected (0,00 sec)
```

### Tablodaki Kayıtları Listeleme

Bir tablodaki veriler, satırlar şeklinde tutulur. Bu satırlara aynı zamanda veri tabanı kayıtları da denir.

Bir tablodaki verileri listelerken kullanılan syntax

SELECT column1, column2, ... FROM table_name;

şeklindedir. Öncelikle

SELECT

keyword ü ile listelenmek istenen sütunlar seçilir ardından

FROM

keyword ü ile tablo belirtilir. Eğer bir tablodaki tüm sütunları listelemek istiyorsak

SELECT * FROM table_name;

şeklinde listeleriz.

```auto
mysql> SELECT * FROM Persons;
+----------+----------+-----------+---------------+-------------+
| PersonID | LastName | FirstName | Address       | City        |
+----------+----------+-----------+---------------+-------------+
|        1 | Smith    | John      | 123 Oak St    | New York    |
|        2 | Johnson  | Emily     | 456 Maple Ave | Los Angeles |
|        3 | Williams | Michael   | 789 Pine Rd   | Chicago     |
|        4 | Brown    | Sarah     | 101 Elm St    | Houston     |
|        5 | Davis    | James     | 202 Birch Dr  | Phoenix     |
+----------+----------+-----------+---------------+-------------+
5 rows in set (0,00 sec)

mysql> SELECT FirstName, LastName FROM Persons;
+-----------+----------+
| FirstName | LastName |
+-----------+----------+
| John      | Smith    |
| Emily     | Johnson  |
| Michael   | Williams |
| Sarah     | Brown    |
| James     | Davis    |
+-----------+----------+
5 rows in set (0,00 sec)
```

### Tablodaki Kayıtları Güncelleme

Bir tablodaki kayıtların tümünü ya da tek bir satırı güncellemek için

UPDATE

keyword ü kullanılır.

**Syntax**

```auto
UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
```

UPDATE

keyword ü ile güncelleme yapmak istediğimiz tabloyu belirtiriz.

SET

keyword ü ile güncelleme yapmak istediğimiz sütunları ve yeni değerlerini yazarız.

WHERE

keyword ü ile hangi satırı ya da satırları güncelleyeceğimizi berlirtmek için koşul yazarız. Eğer

WHERE

ile bir koşul belirtmezsek tüm tablo güncellenir ve bu da genellikle istenmeyen bir durumdur.

Tablodaki,

5

PersonID

değerine sahip

James Davis

isimli kişiye ait olan kaydın

City

bilgisini güncelleyelim.

```auto
mysql> UPDATE Persons SET City='San Francisco' WHERE PersonID=5;
Query OK, 1 row affected (0,00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> SELECT * FROM Persons;
+----------+----------+-----------+---------------+---------------+
| PersonID | LastName | FirstName | Address       | City          |
+----------+----------+-----------+---------------+---------------+
|        1 | Smith    | John      | 123 Oak St    | New York      |
|        2 | Johnson  | Emily     | 456 Maple Ave | Los Angeles   |
|        3 | Williams | Michael   | 789 Pine Rd   | Chicago       |
|        4 | Brown    | Sarah     | 101 Elm St    | Houston       |
|        5 | Davis    | James     | 202 Birch Dr  | San Francisco |
+----------+----------+-----------+---------------+---------------+
5 rows in set (0,00 sec)
```

Evet görüldüğü üzere sadece son satırdaki kaydın

City

bilgisi güncellendi. Çünkü yazdığımız SQL sorgusunda

WHERE

keyword ü ile sadece

5 PersonID

değerine sahip olan kişinin verilerinde güncelleme işlemi yapmak istediğimizi belirttik.

Şimdi

WHERE

keywordünü kullanmayalım ve tüm kayıtların

City

bilgisini güncelleyelim.

```auto
mysql> UPDATE Persons SET City='San Francisco';
Query OK, 4 rows affected (0,00 sec)
Rows matched: 5  Changed: 4  Warnings: 0

mysql> SELECT * FROM Persons;
+----------+----------+-----------+---------------+---------------+
| PersonID | LastName | FirstName | Address       | City          |
+----------+----------+-----------+---------------+---------------+
|        1 | Smith    | John      | 123 Oak St    | San Francisco |
|        2 | Johnson  | Emily     | 456 Maple Ave | San Francisco |
|        3 | Williams | Michael   | 789 Pine Rd   | San Francisco |
|        4 | Brown    | Sarah     | 101 Elm St    | San Francisco |
|        5 | Davis    | James     | 202 Birch Dr  | San Francisco |
+----------+----------+-----------+---------------+---------------+
5 rows in set (0,00 sec)
```

Görüldüğü üzere tüm kayıtların

City

verisi değiştirilerek güncellendi.

## Tablodaki Kayıtları Silme Tablodaki bir kaydı silmek için

DELETE

keyword ü kullanılır. Syntax i

DELETE FROM table_name WHERE condition;

şeklindedir. Eğer

WHERE

keyword ü ile bir koşul belirtmezsek, tablodaki tüm kayıtlar silinir. Bu da genellikle istenmeyen bir durumdur.

Şimdi,

5 PersonID

'li kaydı silelim.

```auto
mysql> DELETE FROM Persons WHERE PersonID=5;
Query OK, 1 row affected (0,00 sec)

mysql> SELECT * FROM Persons;
+----------+----------+-----------+---------------+---------------+
| PersonID | LastName | FirstName | Address       | City          |
+----------+----------+-----------+---------------+---------------+
|        1 | Smith    | John      | 123 Oak St    | San Francisco |
|        2 | Johnson  | Emily     | 456 Maple Ave | San Francisco |
|        3 | Williams | Michael   | 789 Pine Rd   | San Francisco |
|        4 | Brown    | Sarah     | 101 Elm St    | San Francisco |
+----------+----------+-----------+---------------+---------------+
4 rows in set (0,00 sec)
```

### UNION `Operatörü

UNION

operatörü, iki veya daha fazla

SELECT

operatörünün sonuç kümesini birleştirmek için kullanılır.

- UNION içindeki her SELECT deyimi aynı sayıda sütuna sahip olmalıdır
- Sütunlar da benzer veri türlerine sahip olmalıdır
- Her SELECT deyimindeki sütunlar da aynı sırada olmalıdır

**Syntax**

```auto
SELECT column_name(s) FROM table1
UNION
SELECT column_name(s) FROM table2;
```

Şimdi aşağıdaki örnek 2 tabloyu ve kayılatrı veri tabanına ekleyelim ve ardından UNION sorgumuzu çalıştıralım.

**Tablo 1**

```auto
CREATE TABLE Employees (
    EmployeeID int,
    Name varchar(255),
    Position varchar(255)
);

INSERT INTO Employees (EmployeeID, Name, Position) VALUES (1, 'Alice Johnson', 'Software Developer');
INSERT INTO Employees (EmployeeID, Name, Position) VALUES (2, 'Bob Smith', 'Data Analyst');
```

**Tablo 2**

```auto
CREATE TABLE Managers (
    ManagerID int,
    Name varchar(255),
    Department varchar(255)
);

INSERT INTO Managers (ManagerID, Name, Department) VALUES (1, 'Carol Taylor', 'IT');
INSERT INTO Managers (ManagerID, Name, Department) VALUES (2, 'Dave Brown', 'Marketing');
```

**UNION Sorgusu**

```auto
mysql> SELECT Name, Position AS Detail FROM Employees
    -> UNION
    -> SELECT Name, Department AS Detail FROM Managers;
+---------------+--------------------+
| Name          | Detail             |
+---------------+--------------------+
| Alice Johnson | Software Developer |
| Bob Smith     | Data Analyst       |
| Carol Taylor  | IT                 |
| Dave Brown    | Marketing          |
+---------------+--------------------+
4 rows in set (0,00 sec)
```

Bu sorgu sonucunda aldığımız çıktı; 2 farklı tablodaki aynı sayıda sütununun seçilerek, tek bir tabloda birleşitirilmiş sonucudur.

### Tablo Silme

Bir tabloyu silmek için kullanılan syntax

DROP TABLE <TABLE_NAME>

şeklindedir.

```auto
mysql> DROP TABLE Persons;
Query OK, 0 rows affected (0,01 sec)

mysql> SHOW TABLES;
+----------------------+
| Tables_in_fogolo_app |
+----------------------+
| Employees            |
| Managers             |
+----------------------+
2 rows in set (0,00 sec)
```

### Veri Tabanı Silme

Bir veri tabanını silmek için kullanılan syntax

DROP DATABASE <DATABASE_NAME>

şeklindedir.

```auto
mysql> DROP DATABASE fogolo_app;
Query OK, 2 rows affected (0,01 sec)

mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0,00 sec)
```